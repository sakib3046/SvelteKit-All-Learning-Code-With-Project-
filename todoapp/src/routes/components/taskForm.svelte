<script>
    import Button from "./button.svelte";
    import PriorityColor from "./priorityColor.svelte";
    import {taskStore} from '../../store'
    let title='';
    let description='';
    let color='';
    let task;

    function submitHandler(e){
        let id=(Math.random()* new Date().getTime()).toString();
        task={
            id,
            title,
            description,
            color,
            completed:false,
            editable:false
        }

        if (!title) {
               alert('Enter your task title')
        }
        else{
            let newtask=[task,...$taskStore]

            taskStore.set(newtask)

        }


       



        e.target.reset();
        color=null;
        title=null;
        description=null;

    }

</script>




<div class="my-4 p-4 flex flex-col border border-black rounded-[15px] items-center shadow-2xl w-max">
    <form action="" on:submit|preventDefault={submitHandler} class=" flex flex-col items-center">

        <h1 class="text-3xl font-bold">ToDo <span class="text-green-600">App</span></h1>
        <h1 class="my-5 text-xl font-semibold ">Enter your tasks</h1>
        <div class="flex flex-col">
            <label for="title" class="py-1"> Enter your task title:</label>
            <input bind:value={title} type="text" placeholder="Task title" class="bg-green-100 px-4 shadow-xl py-2 rounded-[10px] focus:bg-white focus:outline-green-600">
        </div>
    
        <div class="flex flex-col my-4">
            <label for="title" class="py-1"> Enter your task Description:</label>
            <textarea bind:value={description} name="" placeholder="Enter the task description" id="" class=" shadow-xl bg-green-100 px-4 py-2 rounded-[10px] focus:bg-white focus:outline-green-600"></textarea>
        </div>
    
    
        <PriorityColor bind:selectedColor={color}/>
        <Button/>
    </form>
   
    
</div>